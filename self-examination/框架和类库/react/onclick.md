## 理解 React 中 `onClick` 绑定后的工作原理

在 React 中，`onClick` 事件处理程序的工作原理涉及到 React 事件系统的几个关键概念。React 为了提高性能和兼容性，实现了自己的事件处理程序，这个系统与原生的浏览器事件系统有所不同，以下是 `onClick` 事件处理程序在 React 中工作的基本原理

#### 虚拟 DOM 事件监听

React 并不会直接在 DOM 元素上绑定事件处理器。相反，它在根 DOM 元素上使用了单一事件监听器来监听所有事件。这种方法被称为事件委托。这意味着，不管在 React 组件树中的多少元素上绑定了 `onClick`，实际上只有一个事件监听器在处理所有的点击事件

#### 合成事件 (SyntheticEvent)

当事件发生时，React 创建一个封装了原生事件的 `SyntheticEvent` 对象。这个合成事件对象提供了与原生事件对象相似的接口和属性，但它是跨浏览器的，意味着它在不同浏览器中表现一致。React 使用合成事件是为了确保事件处理代码在所有浏览器中都能一致运行

#### 事件处理和更新

当用户点击一个绑定了 `onClick` 处理程序的 React 元素时，以下步骤会被执行：

1. 用户的点击操作触发了根元素上的事件监听器

2. React 根据事件的类型和发生的位置，决定事件应该由哪个组件来处理。它会使用合成事件对象来模拟事件冒泡过程，从而确定正确的目标组件

3. 一旦确定了目标组件，React 会调用绑定到该组件上的 `onClick` 事件处理程序，并传递一个 `SyntheticEvent` 对象作为参数

4. 事件处理程序执行后，如果组件的状态被更新，React 重新渲染组件以反映最新的状态

#### 事件池

React 为了更高效的使用内存，会将合成事件对象放入一个事件池中以供重用。这意味着合成事件对象在事件回调函数执行完毕后会被清空，并且可能会被后续的事件重用。因此，如果想异步访问对象的属性，需要在事件回调中调用 `event.persist()` 方法，这样可以阻止事件对象被回收到事件池中
