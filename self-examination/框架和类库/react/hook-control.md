## hook 为什么不能出现在控制语句中？为什么要用链表或数组，用其他的数据结构不行么

React Hook 的设计和实现遵循了一套特定的规则和原则，以确保它们的使用既安全又高效

### 为什么 Hooks 不能出现在控制语句中

- 保持 Hooks 的调用顺序一致性

  React 依赖于 Hooks 被调用的顺序来正确地关联 Hook 的状态。如果将 Hooks 放在条件语句中，那么他们的调用顺序可能会因为条件的不同而改变，导致 React 无法正确地追踪 Hooks 的状态

- 确保渲染的确定性

  React 组件的渲染应该是可预测的。如果 Hooks 的调用依赖于条件语句，那么组件的渲染行为将变得不确定，这违背了函数式编程的原则，增加了组件逻辑的复杂性和出错的可能性

### 为什么使用链表或数组

React 内部使用链表或数组来管理 Hooks，主要是基于以下考虑：

- 索引访问

  数组提供了基于索引的快速访问能力，这使得 React 可以高效地根据调用顺序访问对应的 Hook 状态。每次组件渲染时，React 按顺序遍历 Hooks 数组，确保状态的一致性和可预测性

- 内存效率

  相对于其他数据结构，数组（或链表）在管理一系列有序数据时提供了较高的内存效率。考虑到 Hooks 可能在许多组件中广泛使用，选择内存效率较高的数据结构有助于提高整体的性能。

- 简化状态管理

  使用数组或链表简化了 Hooks 状态管理的实现。React 只需要在每次渲染时按照相同的顺序遍历这个结构，就可以保证状态的正确性。这比在一个复杂的数据结构中查找和管理状态要简单得多。

### 使用其他数据结构的可能性

虽然理论上可以考虑使用其他数据结构来管理 Hooks（如树、图或哈希表），但这些结构在此场景下并不提供显著的优势，反而可能增加实现的复杂性，影响性能。数组和链表因其简单性、效率以及对顺序访问的天然支持，成为了管理 Hooks 状态的理想选择。
