## 虚拟 DOM 是否真的比操作原生 DOM 快

> Reference: [zhihu](https://www.zhihu.com/question/31809713/answer/53544875)

虚拟 DOM（Virtual DOM）相对于直接操作原生 DOM 的优势在于它可以通过比较虚拟 DOM 树的差异来进行局部更新（patch），从而减少对实际 DOM 的操作次数，提高性能，然而，是否真的比操作原生 DOM 快，取决于具体的情况

### 虚拟 DOM 的性能优势

- 批量更新：虚拟 DOM 可以将多个操作合并成一次更新，减少 DOM 操作的次数，相比直接操作原生 DOM，虚拟 DOM 的批量更新可以减少浏览器的重排（reflow）和重绘（repaint）次数，提高性能

- 节点操作优化：虚拟 DOM 可以通过算法优化节点操作，例如使用 Diff 算法计算出需要更新的最小节点集合，避免不必要的节点操作，减少性能消耗

- 跨平台兼容性：虚拟 DOM 抽象了实际 DOM 的操作，使得它可以跨平台使用，例如在浏览器中使用 React，或在移动端使用 React Native。这种跨平台的能力使得开发者可以共享大部分代码，提高开发效率

### 虚拟 DOM 性能开销

- 首次渲染：虚拟 DOM 需要先将组建的状态转化为虚拟 DOM 树，然后再将虚拟 DOM 树转化为真实 DOM，这个过程需要一定的时间开销，相比直接操作原生 DOM 的方式会稍慢一些

- 内存消耗：虚拟 DOM 需要维护一个额外的数据结构来表示虚拟 DOM 树，这会占用一定的内存

### 总结

总的来说，虚拟 DOM 的性能优势在于它可以通过优化节点操作和批量更新来减少实际 DOM 的操作次数，提高性能。但在一些简单的场景或需要高性能的场景下，直接操作原生 DOM 可能更加高效，选择使用虚拟 DOM 还是直接操作原生 DOM，取决于具体的应用场景和开发需求
