## 理解 Javascript 的作用域和作用域链

### 作用域

在 JS 中，作用域指的是变量访问的范围，决定了代码中某个部分的变量和函数是否能够被访问到，作用域可以分为四类：全局作用域、模块作用域、函数作用域、块级作用域

- 全局作用域：变量在程序的任何地方都可以被访问，例如 `window` 对象

- 模块作用域：早期 JS 中并没有模块的定义，但是随着 `CommonJS`、`ES module` 等模块化规范的到来，JS 中也出现了模块作用域，顾名思义，该模块中拥有自己独立的作用域，其他模块无法访问

- 函数作用域：是由函数所创建的作用域，闭包就是在该作用域下产生的

- 块级作用域：ES6 的 `let`、`const` 关键字出现后，使得 JS 拥有了块级作用域的概念，在块级作用域内部的变量无法在外部访问

### 作用域链

作用域链是指在 JS 代码执行过程中，从当前作用域开始向上查找所有父级作用域的过程，直到找到制定的变量或函数为止。在作用域链中，每一个作用域都有一个对应的变量对象，变量对象保存了该作用域中声明的所有变量和函数。当 JS 引擎访问一个变量时，会先在当前作用域的变量对象中查找，如果找到了该变量则返回其值，如果没有找到则沿着作用域链向上查找

作用域链的创建过程时在函数定义时确定的，而不是在函数执行时确定的。当函数被调用时，会创建一个新的执行上下文，该执行上下文会包含一个指向该函数作用域的作用域链，执行上下文会被压入调用栈中，当函数执行完毕后，该执行上下文会被弹出调用栈，作用域链也会被销毁
