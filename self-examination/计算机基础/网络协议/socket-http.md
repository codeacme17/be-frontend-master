## 理解 WebSocket 协议的底层原理、与 HTTP 的区别

WebSocket 协议是一种基于 TCP 的双向通信协议（全双工通信），它允许客户端和服务器之间建立持久的连接，实现实时数据的双向传输

### 区别

- 建立连接的方式：

  - HTTP：HTTP 协议是一种无状态的请求-响应协议，客户端发送请求后，服务端响应请求并关闭连接，每次请求都需要重新建立连接。这种方式适用于客户端向服务器请求数据的场景
  - WebSocket：WebSocket 是一种持久性的连接协议，客户端和服务器之间建立一次连接后（TCP 握手），可以保持连接状态。实现实时的双向通信，这种方式适用于需要实时通信的场景，如聊天应用、实时游戏等

- 通信方式：

  - HTTP：HTTP 协议中服务端需要等待客户端的请求才会发送响应（HTTP/1.1）
  - WebSocket：允许客户端与服务端实时的双向传输数据

- 协议头：

  - HTTP：请求和响应包含较多的头部信息，用于描述请求或响应的信息和保存状态
  - WebSocket：采用较为简洁的协议头，用于建立连接时的握手，之后通信数据的头部较小

- 兼容性：
  - HTTP：在浏览器和服务器之间得到广泛支持，可用于访问 Web 页面和 RESTful API
  - WebSocket：在现代浏览器中有良好的支持，但在一些老的浏览器中可能不完全支持，可以使用 `socket.io` 这类的库进行兼容

### 总结

总体来说，WebSocket 协议适用于实时通信的场景，能够在客户端和服务器之间建立持久连接的双向通信，实现低延迟的双向通信。而 HTTP 协议适用于传统的请求-响应模式，用于客户端向服务器发送请求的场景
