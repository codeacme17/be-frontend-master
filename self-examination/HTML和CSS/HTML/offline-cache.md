## `HTML5` 离线缓存原理

HTML5 离线缓存是一种使用 web 应用程序能够在离线状态下继续访问的技术。它通过使用一个称为应用程序缓存（Application Cache）的机制来实现。应用程序缓存允许开发者指定在用户离线时浏览器应该缓存那些文件，以便在没有网络连接时仍然可以访问这些文件

### 工作原理

1. 创建缓存清单（Cache Manifest）文件：开发者需要创建一个文本文件，其中包含在离线状态下缓存的资源列表。这个文件被称为缓存清单文件（Cache Manifest File）。清单文件通常以 `.appcache` 扩展名结尾

2. 在 HTML 文件中引用缓存清单：在 HTML 文件的 `<html>` 标签中，通过 `manifest` 属性引用缓存清单文件

```html
<html manifest="example.appcache"></html>
```

3. 定义要缓存的资源：在缓存清单文件中，开发者可以使用简单的文本格式来列出需要在离线时缓存的资源，包括 HTML 文件、CSS 文件、Javascript 文件、图像、文字等。每一行代表一个资源的路径

```
CACHE MANIFEST
# Version 1.0
index.html
style.css
script.js
image.jpg
```

4. 更新缓存：当用户首次访问网页时，浏览器会下载并缓存清单文件中列出的所有资源，之后，当用户再次访问页面时，浏览器会检查缓存清单文件是否有更新。如果清单文件有更新，浏览器会下载新的资源并更新缓存

5. 离线访问：一旦资源被缓存，用户在离线状态下仍然可以访问这些资源。浏览器会在离线状态下尝试从缓存中加载资源，而不会向服务器发出请求

6. 更新策略：开发者可以在缓存清单文件中指定资源的更新策略，包括禁用缓存、只在离线时缓存、始终缓存等。这有助于控制资源的缓存行为

### 注意

HTML5 离线缓存并不适用于所有情况，它主要适用于静态资源不经常变化的 web 程序。并外，由于缓存时持久的，开发者需要谨慎管理缓存清单和资源更新，以确保用户获取到最新的内容
尽管 HTML5 离线缓存在一些场景下有用，但在现代 web 开发中，越来越多的开发者倾向于使用更灵活的方法，如 Service Workers 来实现离线访问和更强大的缓存控制
