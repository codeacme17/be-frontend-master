## 浏览器解析 HTML 代码的原理，以及构建 DOM 树的流程

浏览器解析 HTML 代码并构建 DOM（文本对象模型）树的过程可以简要概括为以下几个步骤：

1. 解析 HTML：浏览器从网络或本地获取 HTML 文档，然后将其解析成一系列的标记(token)

2. 构建解析树（Tokenization）：解析器将标记按照层级关系构建成解析树，这个过程称为 Tokenization，解析树的每个节点代表了 HTML 文档中的一个标签或文本节点

3. 构建 DOM 树：解析器根据解析树构建 DOM 树，DOM 树是文档的内部表示，它以树结构组织了文档的结构和内容

   - 根节点：DOM 树的根节点通常是 `Document` 对象，表示整个 HTML 文档
   - 元素节点：HTML 标签被转换成 DOM 的元素节点，它们包含标签名、属性、子节点等信息
   - 文本节点：HTML 文本内容被装换成 DOM 的文本节点
   - 属性：HTML 元素的属性会被映射为 DOM 元素节点的属性

4. 构建 DOM 树的过程：

   - 解析器遇到开始标签，创建对应的元素节点，并将其添加为父节点的子节点
   - 解析器遇到文本内容，创建文本节点，并将其添加为父节点的子节点
   - 解析器遇到结束标签，将元素节点添加到 DOM 树中的正确位置
   - 解析器会自动进行错误修正，例如自动添加缺失的闭合标签

5. 样式和脚本的处理：浏览器会下载外部样式表和脚本文件，然后应用样式和执行脚本，这可能会影响 DOM 树的结构和内容

6. 渲染树的构建：DOM 树不仅仅包含文档的机构和内容，还包括了页面渲染的信息。浏览器会根据 DOM 树和 CSS 样式生成渲染树（Render Tree），渲染树描述了节点如何显示在浏览器中

整个过程完成后，浏览器根据构建好的渲染树进行绘制，显示在页面上。这个过程是浏览器渲染页面的基础，其中涉及到了很多的优化策略，例如异步加载、延迟脚本执行、CSS 解析和布局等，以提高网页加载速度和用户体验
